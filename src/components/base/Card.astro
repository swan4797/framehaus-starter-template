---
// ========================================
// CARD COMPONENT
// Reusable card container with variants
// ========================================

export interface Props {
  variant?: 'default' | 'bordered' | 'elevated' | 'flat'
  padding?: 'none' | 'sm' | 'md' | 'lg'
  hover?: boolean
  clickable?: boolean
  href?: string
  class?: string
  [key: string]: any
}

const {
  variant = 'default',
  padding = 'md',
  hover = false,
  clickable = false,
  href,
  class: className,
  ...rest
} = Astro.props

const Tag = href ? 'a' : 'div'
const isInteractive = hover || clickable || href

const classes = [
  'card',
  `card--${variant}`,
  `card--padding-${padding}`,
  isInteractive && 'card--interactive',
  className,
].filter(Boolean).join(' ')
---

<Tag
  class={classes}
  href={href}
  {...rest}
>
  <slot />
</Tag>

<style lang="scss">
  @use '../../styles/variables' as *;

  .card {
    display: block;
    background-color: var(--color-bg-primary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    transition:
      transform var(--transition-base),
      box-shadow var(--transition-base),
      border-color var(--transition-base);

    // ----------------------------------------
    // VARIANTS
    // ----------------------------------------

    &--default {
      box-shadow: var(--shadow-card);
    }

    &--bordered {
      border: 1px solid var(--color-border-light);
      box-shadow: none;
    }

    &--elevated {
      box-shadow: var(--shadow-lg);
    }

    &--flat {
      box-shadow: none;
      background-color: var(--color-bg-secondary);
    }

    // ----------------------------------------
    // PADDING
    // ----------------------------------------

    &--padding-none {
      padding: 0;
    }

    &--padding-sm {
      padding: 0.75rem;
    }

    &--padding-md {
      padding: 1.25rem;
    }

    &--padding-lg {
      padding: 1.5rem;
    }

    // ----------------------------------------
    // INTERACTIVE
    // ----------------------------------------

    &--interactive {
      cursor: pointer;

      &:hover {
        transform: translateY(-4px);
      }

      &.card--default:hover {
        box-shadow: var(--shadow-card-hover);
      }

      &.card--bordered:hover {
        border-color: var(--color-border-medium);
        box-shadow: var(--shadow-sm);
      }

      &.card--elevated:hover {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
      }

      &.card--flat:hover {
        background-color: var(--color-bg-tertiary);
      }

      &:focus-visible {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
      }

      &:active {
        transform: translateY(-2px);
      }
    }
  }

  // ----------------------------------------
  // RESPONSIVE
  // ----------------------------------------

  @media (max-width: 640px) {
    .card {
      &--padding-lg {
        padding: 1.25rem;
      }

      &--padding-md {
        padding: 1rem;
      }
    }
  }
</style>
