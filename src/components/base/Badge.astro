---
// ========================================
// BADGE COMPONENT
// Small status/label indicators
// ========================================

export interface Props {
  variant?: 'default' | 'primary' | 'success' | 'warning' | 'error' | 'info'
  size?: 'sm' | 'md' | 'lg'
  rounded?: boolean
  dot?: boolean
  class?: string
  [key: string]: any
}

const {
  variant = 'default',
  size = 'md',
  rounded = false,
  dot = false,
  class: className,
  ...rest
} = Astro.props

const classes = [
  'badge',
  `badge--${variant}`,
  `badge--${size}`,
  rounded && 'badge--rounded',
  dot && 'badge--dot',
  className,
].filter(Boolean).join(' ')
---

<span class={classes} {...rest}>
  {dot && <span class="badge__dot" aria-hidden="true" />}
  <slot />
</span>

<style lang="scss">
  @use '../../styles/variables' as *;

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-family: var(--font-family-body);
    font-weight: 600;
    line-height: 1;
    white-space: nowrap;
    border-radius: var(--radius-md);

    // ----------------------------------------
    // SIZES
    // ----------------------------------------

    &--sm {
      padding: 0.25rem 0.5rem;
      font-size: 0.6875rem;
    }

    &--md {
      padding: 0.375rem 0.625rem;
      font-size: 0.75rem;
    }

    &--lg {
      padding: 0.5rem 0.875rem;
      font-size: 0.8125rem;
    }

    // ----------------------------------------
    // VARIANTS
    // ----------------------------------------

    &--default {
      background-color: var(--color-bg-tertiary);
      color: var(--color-text-secondary);
    }

    &--primary {
      background-color: var(--color-primary-light);
      color: var(--color-primary);
    }

    &--success {
      background-color: rgba(34, 197, 94, 0.1);
      color: #16A34A;
    }

    &--warning {
      background-color: rgba(245, 158, 11, 0.1);
      color: #D97706;
    }

    &--error {
      background-color: rgba(220, 38, 38, 0.1);
      color: #DC2626;
    }

    &--info {
      background-color: rgba(59, 130, 246, 0.1);
      color: #2563EB;
    }

    // ----------------------------------------
    // MODIFIERS
    // ----------------------------------------

    &--rounded {
      border-radius: var(--radius-full);
    }

    &--dot {
      padding-left: 0.5rem;
    }
  }

  // ----------------------------------------
  // DOT
  // ----------------------------------------

  .badge__dot {
    width: 0.375rem;
    height: 0.375rem;
    border-radius: 50%;
    flex-shrink: 0;

    .badge--default & {
      background-color: var(--color-text-muted);
    }

    .badge--primary & {
      background-color: var(--color-primary);
    }

    .badge--success & {
      background-color: #16A34A;
    }

    .badge--warning & {
      background-color: #D97706;
    }

    .badge--error & {
      background-color: #DC2626;
    }

    .badge--info & {
      background-color: #2563EB;
    }
  }
</style>
