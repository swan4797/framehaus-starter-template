---
// ========================================
// IMAGE GALLERY COMPONENT
// Lightbox gallery for property images
// With smooth fade transitions & thumbnail carousel
// ========================================

import type { PropertyMedia } from '../../types/database'

interface Props {
  images: PropertyMedia[]
  propertyAddress: string
  propertyId?: string
}

const { images, propertyAddress, propertyId } = Astro.props

// Sort by display order
const sortedImages = [...images]
  .filter(img => img.media_type === 'image')
  .sort((a, b) => a.display_order - b.display_order)

const hasImages = sortedImages.length > 0
const primaryImage = sortedImages[0]
---

<div class="property-gallery" data-property-id={propertyId}>
  {hasImages ? (
    <>
      <!-- Main Image -->
      <div class="main-image-container">
        <img
          src={primaryImage.file_url}
          alt={primaryImage.alt_text || `${propertyAddress} - Main Image`}
          class="main-image"
          id="main-image"
          data-index="0"
        />

        <!-- Image Counter -->
        <div class="image-counter">
          <span id="current-image">1</span> / {sortedImages.length}
        </div>

        <!-- Navigation Arrows (only if multiple images) -->
        {sortedImages.length > 1 && (
          <>
            <button
              class="nav-btn nav-btn--prev"
              id="prev-btn"
              aria-label="Previous image"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
              </svg>
            </button>
            <button
              class="nav-btn nav-btn--next"
              id="next-btn"
              aria-label="Next image"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </>
        )}
      </div>

      <!-- Thumbnail Carousel -->
      {sortedImages.length > 1 && (
        <div class="thumbnail-carousel" data-total-images={sortedImages.length}>
          <button
            class="thumbnail-nav thumbnail-nav--prev"
            id="thumb-prev"
            aria-label="Previous thumbnails"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
          </button>

          <div class="thumbnail-track" id="thumbnail-track">
            <div class="thumbnail-slider" id="thumbnail-slider">
              {sortedImages.map((image, index) => (
                <button
                  class={`thumbnail ${index === 0 ? 'thumbnail--active' : ''}`}
                  data-index={index}
                  aria-label={`View image ${index + 1}`}
                >
                  <img
                    src={image.thumbnail_url || image.file_url}
                    alt={image.alt_text || `${propertyAddress} - Image ${index + 1}`}
                    loading="lazy"
                  />
                </button>
              ))}
            </div>
          </div>

          <button
            class="thumbnail-nav thumbnail-nav--next"
            id="thumb-next"
            aria-label="Next thumbnails"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      )}

      <!-- Lightbox Modal -->
      <div id="lightbox" class="lightbox">
        <button
          id="close-lightbox"
          class="lightbox__close"
          aria-label="Close lightbox"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>

        <button
          id="lightbox-prev"
          class="lightbox__nav lightbox__nav--prev"
          aria-label="Previous image"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
          </svg>
        </button>

        <button
          id="lightbox-next"
          class="lightbox__nav lightbox__nav--next"
          aria-label="Next image"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </button>

        <img
          id="lightbox-image"
          class="lightbox__image"
          src=""
          alt=""
        />

        <div class="lightbox__counter">
          <span id="lightbox-counter">1 / {sortedImages.length}</span>
        </div>
      </div>
    </>
  ) : (
    <div class="no-images">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
      <p>No images available</p>
    </div>
  )}
</div>

<script define:vars={{ sortedImages, propertyId }}>
  // Gallery State
  let currentIndex = 0
  let isAnimating = false
  const images = sortedImages
  const propId = propertyId
  const FADE_DURATION = 250 // ms

  // Thumbnail carousel state
  let thumbnailPage = 0
  let visibleThumbnails = 8 // Default, will be calculated
  let maxThumbnailPages = 0

  // Elements
  const mainImage = document.getElementById('main-image')
  const currentImageSpan = document.getElementById('current-image')
  const prevBtn = document.getElementById('prev-btn')
  const nextBtn = document.getElementById('next-btn')
  const thumbnails = document.querySelectorAll('.thumbnail')

  // Thumbnail carousel elements
  const thumbnailTrack = document.getElementById('thumbnail-track')
  const thumbnailSlider = document.getElementById('thumbnail-slider')
  const thumbPrevBtn = document.getElementById('thumb-prev')
  const thumbNextBtn = document.getElementById('thumb-next')
  const thumbnailCarousel = document.querySelector('.thumbnail-carousel')

  // Lightbox
  const lightbox = document.getElementById('lightbox')
  const lightboxImage = document.getElementById('lightbox-image')
  const lightboxCounter = document.getElementById('lightbox-counter')
  const closeLightboxBtn = document.getElementById('close-lightbox')
  const lightboxPrev = document.getElementById('lightbox-prev')
  const lightboxNext = document.getElementById('lightbox-next')

  // Calculate visible thumbnails based on viewport
  function calculateVisibleThumbnails() {
    const width = window.innerWidth
    if (width <= 400) return 3
    if (width <= 640) return 4
    if (width <= 768) return 6
    return 8
  }

  // Initialize thumbnail carousel
  function initThumbnailCarousel() {
    visibleThumbnails = calculateVisibleThumbnails()
    maxThumbnailPages = Math.max(0, Math.ceil(images.length / visibleThumbnails) - 1)

    // Show/hide nav arrows based on total images
    const showNav = images.length > visibleThumbnails
    if (thumbnailCarousel) {
      thumbnailCarousel.setAttribute('data-show-nav', showNav.toString())
    }

    updateThumbnailNavigation()
    slideThumbnails(0) // Reset to first page
  }

  // Track image view
  function trackImageView(index) {
    if (window.StratosTracker && propId) {
      window.StratosTracker.trackEvent('image_gallery_view', {
        property_id: propId,
        image_index: index,
        image_count: images.length,
      })
    }
  }

  // Fade transition helper
  function fadeTransition(element, newSrc, newAlt, callback) {
    if (!element) return

    // Fade out
    element.classList.add('fade-out')

    setTimeout(() => {
      // Change image
      element.src = newSrc
      element.alt = newAlt

      // Wait for image to load, then fade in
      if (element.complete) {
        element.classList.remove('fade-out')
        if (callback) callback()
      } else {
        element.onload = () => {
          element.classList.remove('fade-out')
          if (callback) callback()
        }
      }
    }, FADE_DURATION)
  }

  // Get thumbnail dimensions
  function getThumbnailDimensions() {
    if (!thumbnails[0]) return { width: 72, gap: 8 }
    const thumb = thumbnails[0]
    const style = getComputedStyle(thumb)
    const width = thumb.offsetWidth
    const gap = parseFloat(style.marginRight) || 8
    return { width, gap }
  }

  // Slide thumbnails to show specific page
  function slideThumbnails(page) {
    if (!thumbnailSlider) return

    const { width, gap } = getThumbnailDimensions()
    const slideAmount = page * visibleThumbnails * (width + gap)
    thumbnailSlider.style.transform = `translateX(-${slideAmount}px)`
    thumbnailPage = page
    updateThumbnailNavigation()
  }

  // Scroll thumbnail carousel so active thumbnail is visible
  function ensureActiveThumbnailVisible(index) {
    const pageForIndex = Math.floor(index / visibleThumbnails)
    if (pageForIndex !== thumbnailPage) {
      slideThumbnails(pageForIndex)
    }
  }

  // Update thumbnail carousel navigation state
  function updateThumbnailNavigation() {
    if (!thumbPrevBtn || !thumbNextBtn) return

    // Disable prev if at first page
    thumbPrevBtn.disabled = thumbnailPage <= 0

    // Disable next if at last page
    thumbNextBtn.disabled = thumbnailPage >= maxThumbnailPages
  }

  // Update main image with fade
  function updateMainImage(index) {
    if (isAnimating || currentIndex === index) return
    isAnimating = true

    currentIndex = index

    if (mainImage && images[index]) {
      fadeTransition(
        mainImage,
        images[index].file_url,
        images[index].alt_text || `Image ${index + 1}`,
        () => {
          isAnimating = false
        }
      )
      mainImage.dataset.index = index.toString()
    }

    if (currentImageSpan) {
      currentImageSpan.textContent = (index + 1).toString()
    }

    // Update thumbnail active state
    thumbnails.forEach((thumb, i) => {
      if (i === index) {
        thumb.classList.add('thumbnail--active')
      } else {
        thumb.classList.remove('thumbnail--active')
      }
    })

    // Ensure active thumbnail is visible
    ensureActiveThumbnailVisible(index)

    trackImageView(index)
  }

  // Navigate
  function navigate(direction) {
    if (isAnimating) return
    const newIndex = direction === 'next'
      ? (currentIndex + 1) % images.length
      : (currentIndex - 1 + images.length) % images.length
    updateMainImage(newIndex)
  }

  // Navigate thumbnail carousel
  function navigateThumbnails(direction) {
    const newPage = direction === 'next'
      ? Math.min(thumbnailPage + 1, maxThumbnailPages)
      : Math.max(thumbnailPage - 1, 0)
    slideThumbnails(newPage)
  }

  // Open lightbox
  function openLightbox(index) {
    currentIndex = index
    if (lightbox && lightboxImage && images[index]) {
      lightboxImage.src = images[index].file_url
      lightboxImage.alt = images[index].alt_text || `Image ${index + 1}`
      lightbox.classList.add('lightbox--open')
      updateLightboxCounter()
      document.body.style.overflow = 'hidden'

      // Animate in
      requestAnimationFrame(() => {
        lightbox.classList.add('lightbox--visible')
      })

      if (window.StratosTracker && propId) {
        window.StratosTracker.trackEvent('lightbox_opened', {
          property_id: propId,
          image_index: index,
        })
      }
    }
  }

  // Close lightbox
  function closeLightbox() {
    if (lightbox) {
      lightbox.classList.remove('lightbox--visible')
      setTimeout(() => {
        lightbox.classList.remove('lightbox--open')
        document.body.style.overflow = ''
      }, 300)
    }
  }

  // Update lightbox counter
  function updateLightboxCounter() {
    if (lightboxCounter) {
      lightboxCounter.textContent = `${currentIndex + 1} / ${images.length}`
    }
  }

  // Navigate lightbox with fade
  function navigateLightbox(direction) {
    if (isAnimating) return
    isAnimating = true

    const newIndex = direction === 'next'
      ? (currentIndex + 1) % images.length
      : (currentIndex - 1 + images.length) % images.length
    currentIndex = newIndex

    if (lightboxImage && images[newIndex]) {
      fadeTransition(
        lightboxImage,
        images[newIndex].file_url,
        images[newIndex].alt_text || `Image ${newIndex + 1}`,
        () => {
          isAnimating = false
        }
      )
      updateLightboxCounter()
      trackImageView(newIndex)
    }
  }

  // Initialize thumbnail carousel
  initThumbnailCarousel()

  // Handle window resize
  let resizeTimeout
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout)
    resizeTimeout = setTimeout(() => {
      initThumbnailCarousel()
      ensureActiveThumbnailVisible(currentIndex)
    }, 150)
  })

  // Event Listeners - Main gallery
  if (prevBtn) prevBtn.addEventListener('click', () => navigate('prev'))
  if (nextBtn) nextBtn.addEventListener('click', () => navigate('next'))

  // Thumbnail click navigation
  thumbnails.forEach((thumb, index) => {
    thumb.addEventListener('click', () => updateMainImage(index))
  })

  // Thumbnail carousel navigation
  if (thumbPrevBtn) thumbPrevBtn.addEventListener('click', () => navigateThumbnails('prev'))
  if (thumbNextBtn) thumbNextBtn.addEventListener('click', () => navigateThumbnails('next'))

  // Main image click opens lightbox
  if (mainImage) {
    mainImage.addEventListener('click', () => {
      const index = parseInt(mainImage.dataset.index || '0')
      openLightbox(index)
    })
  }

  // Lightbox controls
  if (closeLightboxBtn) closeLightboxBtn.addEventListener('click', closeLightbox)
  if (lightboxPrev) lightboxPrev.addEventListener('click', () => navigateLightbox('prev'))
  if (lightboxNext) lightboxNext.addEventListener('click', () => navigateLightbox('next'))

  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (lightbox && lightbox.classList.contains('lightbox--open')) {
      if (e.key === 'ArrowLeft') navigateLightbox('prev')
      if (e.key === 'ArrowRight') navigateLightbox('next')
      if (e.key === 'Escape') closeLightbox()
    }
  })

  // Click outside to close lightbox
  if (lightbox) {
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox()
    })
  }

  // Touch/swipe support
  let touchStartX = 0
  let touchEndX = 0
  const SWIPE_THRESHOLD = 50

  function handleSwipe(element, onSwipeLeft, onSwipeRight) {
    element?.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX
    }, { passive: true })

    element?.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX
      const diff = touchStartX - touchEndX
      if (Math.abs(diff) > SWIPE_THRESHOLD) {
        if (diff > 0) {
          onSwipeLeft()
        } else {
          onSwipeRight()
        }
      }
    }, { passive: true })
  }

  // Add swipe to main image
  handleSwipe(mainImage, () => navigate('next'), () => navigate('prev'))

  // Add swipe to lightbox
  handleSwipe(lightboxImage, () => navigateLightbox('next'), () => navigateLightbox('prev'))
</script>

<style>
  /* ========================================
   * DESIGN TOKENS
   * ======================================== */

  .property-gallery {
    --accent-color: #FF5A5F;
    --text-primary: #1A1A1A;
    --text-muted: #9CA3AF;
    --bg-dark: rgba(0, 0, 0, 0.7);
    --bg-light: #f5f5f5;
    --transition-fast: 150ms ease;
    --transition-base: 250ms ease;
    --transition-smooth: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    --thumb-size: 72px;
    --thumb-gap: 8px;
  }

  /* ========================================
   * MAIN IMAGE CONTAINER
   * ======================================== */

  .main-image-container {
    position: relative;
    margin-bottom: 16px;
    border-radius: 12px;
    overflow: hidden;
    background: var(--bg-light);
  }

  .main-image {
    width: 100%;
    height: 500px;
    object-fit: cover;
    cursor: pointer;
    transition: opacity var(--transition-base);
  }

  .main-image.fade-out {
    opacity: 0;
  }

  @media (max-width: 768px) {
    .main-image {
      height: 300px;
    }
  }

  /* ========================================
   * IMAGE COUNTER
   * ======================================== */

  .image-counter {
    position: absolute;
    bottom: 16px;
    right: 16px;
    background: var(--bg-dark);
    color: white;
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    backdrop-filter: blur(4px);
  }

  /* ========================================
   * MAIN NAVIGATION BUTTONS
   * ======================================== */

  .nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-dark);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition-fast);
    backdrop-filter: blur(4px);
  }

  .nav-btn:hover {
    background: rgba(0, 0, 0, 0.85);
    transform: translateY(-50%) scale(1.05);
  }

  .nav-btn:active {
    transform: translateY(-50%) scale(0.98);
  }

  .nav-btn svg {
    width: 24px;
    height: 24px;
  }

  .nav-btn--prev {
    left: 16px;
  }

  .nav-btn--next {
    right: 16px;
  }

  @media (max-width: 768px) {
    .nav-btn {
      width: 40px;
      height: 40px;
    }

    .nav-btn svg {
      width: 20px;
      height: 20px;
    }

    .nav-btn--prev {
      left: 12px;
    }

    .nav-btn--next {
      right: 12px;
    }
  }

  /* ========================================
   * THUMBNAIL CAROUSEL
   * Fixed width to show ~8 thumbnails with arrows
   * ======================================== */

  .thumbnail-carousel {
    position: relative;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0;
  }

  .thumbnail-track {
    /* Fixed width: 8 thumbnails (72px each + 8px margin) = 640px, minus last margin */
    max-width: calc((var(--thumb-size) + var(--thumb-gap)) * 8 - var(--thumb-gap));
    overflow: hidden;
    border-radius: 8px;
  }

  .thumbnail-slider {
    display: flex;
    padding: 4px 0;
    transition: transform var(--transition-smooth);
  }

  /* Thumbnail navigation buttons */
  .thumbnail-nav {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    color: var(--text-primary);
    border: 1px solid #e5e7eb;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .thumbnail-nav:hover:not(:disabled) {
    background: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
    transform: scale(1.05);
  }

  .thumbnail-nav:active:not(:disabled) {
    transform: scale(0.98);
  }

  .thumbnail-nav:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .thumbnail-nav svg {
    width: 20px;
    height: 20px;
  }

  /* Hide arrows if 8 or fewer images */
  .thumbnail-carousel[data-show-nav="false"] .thumbnail-nav {
    display: none;
  }

  .thumbnail-carousel[data-show-nav="false"] .thumbnail-track {
    max-width: none;
  }

  @media (max-width: 768px) {
    .thumbnail-track {
      /* 6 thumbnails on tablet */
      max-width: calc((var(--thumb-size) + var(--thumb-gap)) * 6 - var(--thumb-gap));
    }
  }

  @media (max-width: 640px) {
    .thumbnail-carousel {
      gap: 8px;
    }

    .thumbnail-nav {
      width: 32px;
      height: 32px;
    }

    .thumbnail-nav svg {
      width: 16px;
      height: 16px;
    }

    .thumbnail-track {
      /* 4 thumbnails on mobile */
      max-width: calc((var(--thumb-size) + var(--thumb-gap)) * 4 - var(--thumb-gap));
    }
  }

  @media (max-width: 400px) {
    .thumbnail-track {
      /* 3 thumbnails on small mobile */
      max-width: calc((var(--thumb-size) + var(--thumb-gap)) * 3 - var(--thumb-gap));
    }
  }

  /* ========================================
   * THUMBNAILS
   * ======================================== */

  .thumbnail {
    flex-shrink: 0;
    width: var(--thumb-size);
    height: var(--thumb-size);
    overflow: hidden;
    border-radius: 8px;
    border: 2px solid transparent;
    cursor: pointer;
    padding: 0;
    margin-right: var(--thumb-gap);
    background: var(--bg-light);
    transition: all var(--transition-fast);
  }

  .thumbnail:last-child {
    margin-right: 0;
  }

  .thumbnail:hover {
    border-color: var(--text-muted);
  }

  .thumbnail--active {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(255, 90, 95, 0.2);
  }

  .thumbnail--active:hover {
    border-color: var(--accent-color);
  }

  .thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-base);
  }

  .thumbnail:hover img {
    transform: scale(1.05);
  }

  .thumbnail--active:hover img {
    transform: none;
  }

  @media (max-width: 768px) {
    .property-gallery {
      --thumb-size: 64px;
    }
  }

  @media (max-width: 480px) {
    .property-gallery {
      --thumb-size: 56px;
      --thumb-gap: 6px;
    }
  }

  /* ========================================
   * LIGHTBOX
   * ======================================== */

  .lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    z-index: 100;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 16px;
    opacity: 0;
    backdrop-filter: blur(8px);
    transition: opacity var(--transition-smooth);
  }

  .lightbox--open {
    display: flex;
  }

  .lightbox--visible {
    opacity: 1;
  }

  .lightbox__image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: opacity var(--transition-base), transform var(--transition-smooth);
  }

  .lightbox__image.fade-out {
    opacity: 0;
    transform: scale(0.98);
  }

  .lightbox__close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition-fast);
    z-index: 10;
  }

  .lightbox__close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.05);
  }

  .lightbox__close svg {
    width: 24px;
    height: 24px;
  }

  .lightbox__nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition-fast);
    z-index: 10;
  }

  .lightbox__nav:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-50%) scale(1.05);
  }

  .lightbox__nav svg {
    width: 32px;
    height: 32px;
  }

  .lightbox__nav--prev {
    left: 20px;
  }

  .lightbox__nav--next {
    right: 20px;
  }

  .lightbox__counter {
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-size: 0.9375rem;
    font-weight: 500;
    background: rgba(0, 0, 0, 0.5);
    padding: 8px 16px;
    border-radius: 20px;
  }

  @media (max-width: 768px) {
    .lightbox__nav {
      width: 44px;
      height: 44px;
    }

    .lightbox__nav svg {
      width: 24px;
      height: 24px;
    }

    .lightbox__nav--prev {
      left: 12px;
    }

    .lightbox__nav--next {
      right: 12px;
    }

    .lightbox__close {
      top: 12px;
      right: 12px;
    }
  }

  /* ========================================
   * NO IMAGES STATE
   * ======================================== */

  .no-images {
    width: 100%;
    height: 500px;
    background: var(--bg-light);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
  }

  .no-images svg {
    width: 64px;
    height: 64px;
    margin-bottom: 12px;
  }

  .no-images p {
    font-size: 1rem;
    margin: 0;
  }

  @media (max-width: 768px) {
    .no-images {
      height: 300px;
    }
  }
</style>
