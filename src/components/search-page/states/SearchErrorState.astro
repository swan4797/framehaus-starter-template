---
// ========================================
// SEARCH ERROR STATE
// Displayed when properties fail to load
// ========================================

import type { SearchErrorStateProps } from '../types'
import { defaultStatesConfig } from '../config'

interface Props extends SearchErrorStateProps {
  class?: string
}

const {
  title = defaultStatesConfig.error.title,
  message = defaultStatesConfig.error.message,
  resetHref = '/search',
  resetText = defaultStatesConfig.error.resetText,
  class: className = '',
} = Astro.props
---

<div class:list={['search-state', 'search-state--error', className]}>
  <svg class="search-state__icon search-state__icon--error" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>
  <h2 class="search-state__title">{title}</h2>
  <p class="search-state__message">{message}</p>
  <a href={resetHref} class="search-state__button">{resetText}</a>
</div>

<style lang="scss">
  @use '../../../styles/variables' as *;
  @use '../../../styles/mixins' as *;

  .search-state {
    background: $bg-white;
    border-radius: $radius-xl;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    border: 1px solid $border-light;
    padding: $spacing-16 $spacing-8;
    text-align: center;

    @include mobile-only {
      padding: $spacing-12 $spacing-6;
    }
  }

  .search-state__icon {
    width: 5rem;
    height: 5rem;
    margin: 0 auto $spacing-6;

    @include mobile-only {
      width: 4rem;
      height: 4rem;
    }
  }

  .search-state__icon--error {
    color: #EF4444;
  }

  .search-state__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $text-primary;
    margin: 0 0 $spacing-3 0;
  }

  .search-state__message {
    font-size: $font-size-base;
    color: $text-secondary;
    margin: 0 0 $spacing-8 0;
    line-height: $line-height-relaxed;
  }

  .search-state__button {
    display: inline-flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-4 $spacing-6;
    background: $accent-coral;
    color: $bg-white;
    text-decoration: none;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    transition: background $transition-fast, transform $transition-fast, box-shadow $transition-fast;

    &:hover {
      background: $accent-coral-dark;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba($accent-coral, 0.3);
    }

    &:active {
      transform: translateY(0);
    }
  }
</style>
