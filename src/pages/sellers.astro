---
// ========================================
// SELLERS PAGE
// Services page for property sellers
// Dynamic content from Stratos CRM
// ========================================

import Layout from '../layouts/Layout.astro'
import { fetchBrandSettings, getContactInfo } from '../lib/brand'

// Page content utilities
import {
  getPageContent,
  getSectionTitle,
  getSectionContent,
  getSectionImage,
  hasSection,
} from '../lib/pages'

const pageTitle = 'Selling Your Property'
const pageDescription = 'Expert guidance and support for selling your property. Get the best price with our experienced team.'

// Fetch brand settings
const brand = await fetchBrandSettings(true)
const contact = getContactInfo(brand)

// Fetch sellers page content from Stratos CRM
const pageContent = await getPageContent('sellers')

// ========================================
// SPECIFIC SECTION BLOCK KEYS
// These match the block_keys from Stratos CRM
// ========================================

// Our Approach section (block_key: our_approach)
const ourApproachTitle = getSectionTitle(pageContent, 'our_approach', 'Our Approach to Selling')
const ourApproachContent = getSectionContent(pageContent, 'our_approach', '<p>We combine traditional estate agency values with modern marketing techniques to achieve the best possible price for your property.</p>')
const ourApproachImage = getSectionImage(pageContent, 'our_approach')

// Selling Process section (block_key: selling_process)
const sellingProcessTitle = getSectionTitle(pageContent, 'selling_process', 'The Selling Process')
const sellingProcessContent = getSectionContent(pageContent, 'selling_process', '')
const sellingProcessImage = getSectionImage(pageContent, 'selling_process')

// Fees section (block_key: fees)
const feesTitle = getSectionTitle(pageContent, 'fees', 'Our Fees')
const feesContent = getSectionContent(pageContent, 'fees', '<p>We offer competitive, transparent fees with no hidden costs.</p>')
const feesImage = getSectionImage(pageContent, 'fees')

// Check which sections exist in CRM
const hasOurApproach = hasSection(pageContent, 'our_approach')
const hasSellingProcess = hasSection(pageContent, 'selling_process')
const hasFees = hasSection(pageContent, 'fees')
---

<Layout title={pageTitle} description={pageDescription}>
  <div class="static-page">

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero__container">
        <div class="hero__left">
          <span class="hero__label">For Sellers</span>
          <h1 class="hero__title">
            <span class="hero__title-line">Sell your property</span>
            <span class="hero__title-line">for the best <span class="hero__title-accent">price</span></span>
          </h1>
        </div>
        <div class="hero__right">
          <p class="hero__tagline">
            With expert local knowledge and a proven track record, we'll help you achieve the best possible price for your property.
          </p>
          <a href="/valuation" class="hero__btn">
            Get a Free Valuation
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" x2="19" y1="12" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </section>

    <!-- Showcase Section -->
    <section class="showcase">
      <div class="showcase__container">
        <div class="showcase__card showcase__card--primary">
          <div class="showcase__card-content">
            <div class="showcase__card-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
            </div>
            <h2 class="showcase__card-title">Maximise Your Sale Price</h2>
            <p class="showcase__card-text">Our marketing expertise and local knowledge ensure your property reaches the right buyers at the right price.</p>
            <div class="showcase__features">
              <div class="showcase__feature">
                <span class="showcase__feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </span>
                Professional Photography
              </div>
              <div class="showcase__feature">
                <span class="showcase__feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </span>
                Premium Portal Listings
              </div>
              <div class="showcase__feature">
                <span class="showcase__feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </span>
                Expert Negotiation
              </div>
            </div>
          </div>
          <img
            src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=600&h=400&fit=crop"
            alt="Property for sale"
            class="showcase__card-image"
          />
        </div>

        <div class="showcase__card showcase__card--secondary">
          <div class="showcase__card-content">
            <h3 class="showcase__card-subtitle">Stress-Free Sales</h3>
            <p class="showcase__card-text">We handle everything from viewings to completion, keeping you informed every step of the way.</p>
          </div>
          <img
            src="https://images.unsplash.com/photo-1582407947304-fd86f028f716?w=400&h=500&fit=crop"
            alt="Happy sellers"
            class="showcase__card-image showcase__card-image--tall"
          />
        </div>
      </div>
    </section>

    <!-- Content Section -->
    <section class="content">
      <div class="content__container">

        <!-- Row 1: Our Approach (block_key: our_approach) -->
        <div class="content__row">
          <div class="content__left">
            <span class="content__label">Our Approach</span>
            <h2 class="content__title">{ourApproachTitle}</h2>
          </div>
          <div class="content__divider"></div>
          <div class="content__right">
            {hasOurApproach && ourApproachContent ? (
              <div class="content__text" set:html={ourApproachContent} />
            ) : (
              <>
                <p class="content__text">
                  Selling a property is one of the biggest financial decisions you'll make. That's why we take a personalised approach, combining local market expertise with modern marketing strategies to attract the right buyers and achieve the best price.
                </p>
                <p class="content__text">
                  From the initial valuation to completion, we keep you informed every step of the way, providing honest advice and dedicated support throughout.
                </p>
              </>
            )}
            {ourApproachImage?.url && (
              <img src={ourApproachImage.url} alt={ourApproachImage.alt || 'Our Approach'} class="content__image" loading="lazy" />
            )}
          </div>
        </div>

        <!-- Row 2: Selling Process (block_key: selling_process) -->
        <div class="content__row">
          <div class="content__left">
            <span class="content__label">The Process</span>
            <h2 class="content__title">{sellingProcessTitle}</h2>
          </div>
          <div class="content__divider"></div>
          <div class="content__right">
            {hasSellingProcess && sellingProcessContent ? (
              <div class="content__text" set:html={sellingProcessContent} />
            ) : (
              <>
                <p class="content__text">
                  We provide everything you need to sell your property quickly and for the best price, with no hidden surprises along the way.
                </p>
                <ul class="content__list">
                  <li>Free, no-obligation market valuations</li>
                  <li>Professional photography and floor plans</li>
                  <li>Listings on Rightmove, Zoopla and OnTheMarket</li>
                  <li>Accompanied viewings at times that suit you</li>
                  <li>Expert negotiation to maximise your sale price</li>
                  <li>Sales progression through to completion</li>
                </ul>
              </>
            )}
            {sellingProcessImage?.url && (
              <img src={sellingProcessImage.url} alt={sellingProcessImage.alt || 'Selling Process'} class="content__image" loading="lazy" />
            )}
          </div>
        </div>

        <!-- Row 3: Fees (block_key: fees) -->
        <div class="content__row">
          <div class="content__left">
            <span class="content__label">Our Fees</span>
            <h2 class="content__title">{feesTitle}</h2>
          </div>
          <div class="content__divider"></div>
          <div class="content__right">
            {hasFees && feesContent ? (
              <div class="content__text" set:html={feesContent} />
            ) : (
              <p class="content__text">
                Our track record speaks for itself. We consistently achieve asking price or above for our clients, and our dedication to exceptional service means you're always in safe hands.
              </p>
            )}
            {feesImage?.url && (
              <img src={feesImage.url} alt={feesImage.alt || 'Our Fees'} class="content__image" loading="lazy" />
            )}
            <div class="content__highlights">
              <div class="content__highlight">
                <span class="content__highlight-value">98%</span>
                <span class="content__highlight-label">Asking price achieved</span>
              </div>
              <div class="content__highlight">
                <span class="content__highlight-value">6 weeks</span>
                <span class="content__highlight-label">Average time to offer</span>
              </div>
              <div class="content__highlight">
                <span class="content__highlight-value">500+</span>
                <span class="content__highlight-label">Properties sold</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Row 4: CTA -->
        <div class="content__row content__row--cta">
          <div class="content__left">
            <span class="content__label">Get Started</span>
            <h2 class="content__title">Ready to sell your property?</h2>
          </div>
          <div class="content__divider"></div>
          <div class="content__right">
            <p class="content__text">
              Book a free valuation today and discover what your property could be worth. Our team is ready to help you every step of the way.
            </p>
            <div class="content__actions">
              <a href="/valuation" class="content__btn content__btn--primary">
                Book a Valuation
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="5" x2="19" y1="12" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </a>
              <a href="/contact" class="content__btn content__btn--secondary">
                Contact Us
              </a>
            </div>
          </div>
        </div>

      </div>
    </section>

  </div>
</Layout>

<style lang="scss">
  @use './static-template.scss';
</style>
